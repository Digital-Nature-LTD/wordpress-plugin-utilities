window.DigitalNature=window.DigitalNature||{};window.DigitalNature.utils={request:{get:async function(e){return(await fetch(e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},redirect:"follow",referrerPolicy:"no-referrer"})).json()},post:async function(e,t={}){return(await fetch(e,{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json","X-WP-Nonce":wpApiSettings.nonce},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(t)})).json()},params:{get(e){return new URLSearchParams(window.location.search).get(e)}}},dragTable:{row:null,init:function(){document.addEventListener("dragstart",function(e){e.target.closest(".dn-draggable-table")&&window.DigitalNature.utils.dragTable.start(e)}),document.addEventListener("dragover",function(e){e.target.closest(".dn-draggable-table")&&window.DigitalNature.utils.dragTable.dragover(e)})},start:function(e){window.DigitalNature.utils.dragTable.row=e.target},dragover:function(e){e.preventDefault();let t=Array.from(e.target.parentNode.parentNode.children);t.indexOf(e.target.parentNode)>t.indexOf(window.DigitalNature.utils.dragTable.row)?e.target.parentNode.after(window.DigitalNature.utils.dragTable.row):e.target.parentNode.before(window.DigitalNature.utils.dragTable.row)}},forms:{hasErrorMessage:function(e){return!!e.parentElement.querySelector(".dn-form-error-message")},addErrorMessage:function(e,t,r=null,n=!0){if(!t){console.error("Cannot add error message, field does not exist. Message was:",e);return}const a=document.createElement("div");a.style.width="100%",a.classList.add("dn-form-error-message"),a.textContent=e,n&&window.DigitalNature.utils.forms.removeErrorMessage(t),t.parentElement.appendChild(a),r&&n&&setTimeout(function(){window.DigitalNature.utils.forms.removeErrorMessage(t)},r*1e3)},removeErrorMessage:function(e){const t=e.parentElement.querySelector(".dn-form-error-message");t&&t.remove()},removeAllErrorMessages:function(e){e.querySelectorAll(".dn-utilities-error-message").forEach(function(t){t.remove()})},updateFieldAndTriggerChangeEvent:function(e,t){e.value=t;let r=new Event("change");e.dispatchEvent(r)}},visibilityToggle:{init:function(){document.addEventListener("click",function(e){if(!e.target.matches(".dn-toggle-visibility-trigger"))return;e.preventDefault();let t=e.target.dataset.targetId;if(!t)return!1;let r=document.getElementById(t);r.classList.toggle("visible");let n=null;return r.classList.contains("visible")?n=e.target.dataset.closedText:n=e.target.dataset.openText,e.target.textContent=n,!1})}},areYouSure:{init:function(){document.addEventListener("click",function(e){if(!e.target.matches(".are-you-sure"))return;let t="Are you sure? This cannot be undone";return e.target.dataset.confirmationMessage&&(t=e.target.dataset.confirmationMessage),confirm(t)?!0:(e.preventDefault(),!1)})}},animations:{addLoadingSpinner:function(e){window.DigitalNature.utils.animations.removeLoadingSpinner(e);const t=document.createElement("div");t.classList.add("digital-nature-loader");const r=document.createElement("div");r.classList.add("digital-nature-loader-background"),t.appendChild(r);const n=document.createElement("div");n.classList.add("digital-nature-loader-content"),t.appendChild(n),e.appendChild(t)},removeLoadingSpinner:function(e){const t=e.querySelector(".digital-nature-loader");t&&t.remove()}}};window.DigitalNature.utils.dragTable.init();window.DigitalNature.utils.visibilityToggle.init();window.DigitalNature.utils.areYouSure.init();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29tbW9uLmpzIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9idWlsZC9hc3NldHMvY29tbW9uL2pzL3dpbmRvdy91dGlsaXRpZXMuanMiXSwic291cmNlc0NvbnRlbnQiOlsid2luZG93LkRpZ2l0YWxOYXR1cmUgPSB3aW5kb3cuRGlnaXRhbE5hdHVyZSB8fCB7fTtcclxuXHJcbndpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzID0ge1xyXG4gICAgcmVxdWVzdDoge1xyXG4gICAgICAgIGdldDogYXN5bmMgZnVuY3Rpb24gKHVybCkge1xyXG4gICAgICAgICAgICAvLyBEZWZhdWx0IG9wdGlvbnMgYXJlIG1hcmtlZCB3aXRoICpcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIiwgLy8gKkdFVCwgUE9TVCwgUFVULCBERUxFVEUsIGV0Yy5cclxuICAgICAgICAgICAgICAgIG1vZGU6IFwiY29yc1wiLFxyXG4gICAgICAgICAgICAgICAgY2FjaGU6IFwibm8tY2FjaGVcIixcclxuICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiBcInNhbWUtb3JpZ2luXCIsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJYLVdQLU5vbmNlXCI6IHdwQXBpU2V0dGluZ3Mubm9uY2VcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICByZWRpcmVjdDogXCJmb2xsb3dcIixcclxuICAgICAgICAgICAgICAgIHJlZmVycmVyUG9saWN5OiBcIm5vLXJlZmVycmVyXCIsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBvc3Q6IGFzeW5jIGZ1bmN0aW9uICh1cmwsIGRhdGEgPSB7fSkge1xyXG4gICAgICAgICAgICAvLyBEZWZhdWx0IG9wdGlvbnMgYXJlIG1hcmtlZCB3aXRoICpcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogXCJQT1NUXCIsIC8vICpHRVQsIFBPU1QsIFBVVCwgREVMRVRFLCBldGMuXHJcbiAgICAgICAgICAgICAgICBtb2RlOiBcImNvcnNcIixcclxuICAgICAgICAgICAgICAgIGNhY2hlOiBcIm5vLWNhY2hlXCIsXHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogXCJzYW1lLW9yaWdpblwiLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwiWC1XUC1Ob25jZVwiOiB3cEFwaVNldHRpbmdzLm5vbmNlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgcmVkaXJlY3Q6IFwiZm9sbG93XCIsXHJcbiAgICAgICAgICAgICAgICByZWZlcnJlclBvbGljeTogXCJuby1yZWZlcnJlclwiLFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhcmFtczoge1xyXG4gICAgICAgICAgICBnZXQocGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaClcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cmxQYXJhbXMuZ2V0KHBhcmFtKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuXHJcblxyXG4gICAgZHJhZ1RhYmxlOiB7XHJcbiAgICAgICAgcm93OiBudWxsLFxyXG5cclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAnZHJhZ3N0YXJ0JyxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xvc2VzdCgnLmRuLWRyYWdnYWJsZS10YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLmRyYWdUYWJsZS5zdGFydChldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgJ2RyYWdvdmVyJyxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xvc2VzdCgnLmRuLWRyYWdnYWJsZS10YWJsZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLmRyYWdUYWJsZS5kcmFnb3ZlcihldmVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzdGFydDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLmRyYWdUYWJsZS5yb3cgPSBldmVudC50YXJnZXQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBkcmFnb3ZlcjogZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgY2hpbGRyZW49IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZHJlbik7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2hpbGRyZW4uaW5kZXhPZihldmVudC50YXJnZXQucGFyZW50Tm9kZSkgPiBjaGlsZHJlbi5pbmRleE9mKHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLmRyYWdUYWJsZS5yb3cpKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudC50YXJnZXQucGFyZW50Tm9kZS5hZnRlcih3aW5kb3cuRGlnaXRhbE5hdHVyZS51dGlscy5kcmFnVGFibGUucm93KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLmJlZm9yZSh3aW5kb3cuRGlnaXRhbE5hdHVyZS51dGlscy5kcmFnVGFibGUucm93KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgLy8gdXRpbGl0aWVzIGZvciB1c2Ugb24gZm9ybXNcclxuICAgIGZvcm1zOiB7XHJcbiAgICAgICAgaGFzRXJyb3JNZXNzYWdlOiBmdW5jdGlvbihmaWVsZCkge1xyXG4gICAgICAgICAgICBjb25zdCBleGlzdGluZ0Vycm9yTWVzc2FnZSA9IGZpZWxkLnBhcmVudEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmRuLWZvcm0tZXJyb3ItbWVzc2FnZScpXHJcblxyXG4gICAgICAgICAgICByZXR1cm4gISFleGlzdGluZ0Vycm9yTWVzc2FnZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFkZEVycm9yTWVzc2FnZTogZnVuY3Rpb24obWVzc2FnZSwgZmllbGQsIHJlbW92ZUFmdGVyU2Vjb25kcyA9IG51bGwsIHJlbW92ZUV4aXN0aW5nRXJyb3JzID0gdHJ1ZSkge1xyXG4gICAgICAgICAgICBpZiAoIWZpZWxkKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdDYW5ub3QgYWRkIGVycm9yIG1lc3NhZ2UsIGZpZWxkIGRvZXMgbm90IGV4aXN0LiBNZXNzYWdlIHdhczonLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyBlcnJvciBtZXNzYWdlIGNvbnRhaW5lclxyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKVxyXG4gICAgICAgICAgICBlcnJvck1lc3NhZ2Uuc3R5bGUud2lkdGggPSAnMTAwJSdcclxuICAgICAgICAgICAgZXJyb3JNZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2RuLWZvcm0tZXJyb3ItbWVzc2FnZScpXHJcbiAgICAgICAgICAgIGVycm9yTWVzc2FnZS50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVtb3ZlRXhpc3RpbmdFcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBleGlzdGluZyBlcnJvciBtZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgd2luZG93LkRpZ2l0YWxOYXR1cmUudXRpbHMuZm9ybXMucmVtb3ZlRXJyb3JNZXNzYWdlKGZpZWxkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXcgZXJyb3IgbWVzc2FnZSB0byB0aGUgcGFnZVxyXG4gICAgICAgICAgICBmaWVsZC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKGVycm9yTWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVtb3ZlQWZ0ZXJTZWNvbmRzICYmIHJlbW92ZUV4aXN0aW5nRXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuRGlnaXRhbE5hdHVyZS51dGlscy5mb3Jtcy5yZW1vdmVFcnJvck1lc3NhZ2UoZmllbGQpXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVBZnRlclNlY29uZHMgKiAxMDAwXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgcmVtb3ZlRXJyb3JNZXNzYWdlOiBmdW5jdGlvbihmaWVsZCkge1xyXG4gICAgICAgICAgICAvLyByZW1vdmUgZXhpc3RpbmcgZXJyb3IgbWVzc2FnZXNcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdFcnJvck1lc3NhZ2UgPSBmaWVsZC5wYXJlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kbi1mb3JtLWVycm9yLW1lc3NhZ2UnKVxyXG4gICAgICAgICAgICBpZiAoZXhpc3RpbmdFcnJvck1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgIGV4aXN0aW5nRXJyb3JNZXNzYWdlLnJlbW92ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZW1vdmVBbGxFcnJvck1lc3NhZ2VzOiBmdW5jdGlvbihjb250YWluZXIpIHtcclxuICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5kbi11dGlsaXRpZXMtZXJyb3ItbWVzc2FnZScpLmZvckVhY2goZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuXHJcbiAgICAgICAgdXBkYXRlRmllbGRBbmRUcmlnZ2VyQ2hhbmdlRXZlbnQ6IGZ1bmN0aW9uKGlucHV0LCBuZXdWYWx1ZSkge1xyXG4gICAgICAgICAgICBpbnB1dC52YWx1ZSA9IG5ld1ZhbHVlO1xyXG5cclxuICAgICAgICAgICAgLy8gY3JlYXRlIGFuZCBkaXNwYXRjaCBhbiBldmVudCBzbyB0aGUgZmllbGQgaXMgdXBkYXRlZCBpbiBjaGVja291dFxyXG4gICAgICAgICAgICBsZXQgZXZlbnQgPSBuZXcgRXZlbnQoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICBpbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxuXHJcbiAgICB2aXNpYmlsaXR5VG9nZ2xlOiB7XHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXHJcbiAgICAgICAgICAgICAgICAnY2xpY2snLFxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24oZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5tYXRjaGVzKCcuZG4tdG9nZ2xlLXZpc2liaWxpdHktdHJpZ2dlcicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRJZCA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LnRhcmdldElkO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmcgdG8gdGFyZ2V0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0YXJnZXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGFyZ2V0SWQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRFbGVtZW50LmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2libGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHRvZ2dsZXJUZXh0ID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRhcmdldEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd2aXNpYmxlJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9nZ2xlclRleHQgPSBldmVudC50YXJnZXQuZGF0YXNldC5jbG9zZWRUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvZ2dsZXJUZXh0ID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQub3BlblRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQudGV4dENvbnRlbnQgPSB0b2dnbGVyVGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgYXJlWW91U3VyZToge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICAgICAgJ2NsaWNrJyxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFldmVudC50YXJnZXQubWF0Y2hlcygnLmFyZS15b3Utc3VyZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb25maXJtYXRpb25NZXNzYWdlID0gJ0FyZSB5b3Ugc3VyZT8gVGhpcyBjYW5ub3QgYmUgdW5kb25lJztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnRhcmdldC5kYXRhc2V0LmNvbmZpcm1hdGlvbk1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybWF0aW9uTWVzc2FnZSA9IGV2ZW50LnRhcmdldC5kYXRhc2V0LmNvbmZpcm1hdGlvbk1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlybShjb25maXJtYXRpb25NZXNzYWdlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG5cclxuICAgIC8vIGFuaW1hdGVkIGNvbXBvbmVudHNcclxuICAgIGFuaW1hdGlvbnM6IHtcclxuICAgICAgICBhZGRMb2FkaW5nU3Bpbm5lcjogZnVuY3Rpb24oY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBleGlzdGluZyBsb2FkZXJzXHJcbiAgICAgICAgICAgIHdpbmRvdy5EaWdpdGFsTmF0dXJlLnV0aWxzLmFuaW1hdGlvbnMucmVtb3ZlTG9hZGluZ1NwaW5uZXIoY29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdTcGlubmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgbG9hZGluZ1NwaW5uZXIuY2xhc3NMaXN0LmFkZCgnZGlnaXRhbC1uYXR1cmUtbG9hZGVyJylcclxuICAgICAgICAgICAgY29uc3QgbG9hZGluZ1NwaW5uZXJCYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcclxuICAgICAgICAgICAgbG9hZGluZ1NwaW5uZXJCYWNrZ3JvdW5kLmNsYXNzTGlzdC5hZGQoJ2RpZ2l0YWwtbmF0dXJlLWxvYWRlci1iYWNrZ3JvdW5kJyk7XHJcbiAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyLmFwcGVuZENoaWxkKGxvYWRpbmdTcGlubmVyQmFja2dyb3VuZCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdTcGlubmVyQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXHJcbiAgICAgICAgICAgIGxvYWRpbmdTcGlubmVyQ29udGVudC5jbGFzc0xpc3QuYWRkKCdkaWdpdGFsLW5hdHVyZS1sb2FkZXItY29udGVudCcpO1xyXG4gICAgICAgICAgICBsb2FkaW5nU3Bpbm5lci5hcHBlbmRDaGlsZChsb2FkaW5nU3Bpbm5lckNvbnRlbnQpO1xyXG5cclxuICAgICAgICAgICAgLy8gYWRkIHRoZSBuZXcgbG9hZGVyIHRvIHRoZSBjb250YWluZXJcclxuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGxvYWRpbmdTcGlubmVyKTtcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICByZW1vdmVMb2FkaW5nU3Bpbm5lcjogZnVuY3Rpb24oY29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nTG9hZGluZ1NwaW5uZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmRpZ2l0YWwtbmF0dXJlLWxvYWRlcicpXHJcbiAgICAgICAgICAgIGlmIChleGlzdGluZ0xvYWRpbmdTcGlubmVyKSB7XHJcbiAgICAgICAgICAgICAgICBleGlzdGluZ0xvYWRpbmdTcGlubmVyLnJlbW92ZSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG59XHJcblxyXG53aW5kb3cuRGlnaXRhbE5hdHVyZS51dGlscy5kcmFnVGFibGUuaW5pdCgpO1xyXG53aW5kb3cuRGlnaXRhbE5hdHVyZS51dGlscy52aXNpYmlsaXR5VG9nZ2xlLmluaXQoKTtcclxud2luZG93LkRpZ2l0YWxOYXR1cmUudXRpbHMuYXJlWW91U3VyZS5pbml0KCk7Il0sIm5hbWVzIjpbInVybCIsImRhdGEiLCJwYXJhbSIsImV2ZW50IiwiY2hpbGRyZW4iLCJmaWVsZCIsIm1lc3NhZ2UiLCJyZW1vdmVBZnRlclNlY29uZHMiLCJyZW1vdmVFeGlzdGluZ0Vycm9ycyIsImVycm9yTWVzc2FnZSIsImV4aXN0aW5nRXJyb3JNZXNzYWdlIiwiY29udGFpbmVyIiwiZXJyb3IiLCJpbnB1dCIsIm5ld1ZhbHVlIiwidGFyZ2V0SWQiLCJ0YXJnZXRFbGVtZW50IiwidG9nZ2xlclRleHQiLCJjb25maXJtYXRpb25NZXNzYWdlIiwibG9hZGluZ1NwaW5uZXIiLCJsb2FkaW5nU3Bpbm5lckJhY2tncm91bmQiLCJsb2FkaW5nU3Bpbm5lckNvbnRlbnQiLCJleGlzdGluZ0xvYWRpbmdTcGlubmVyIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLGNBQWdCLE9BQU8sZUFBaUIsR0FFL0MsT0FBTyxjQUFjLE1BQVEsQ0FDekIsUUFBUyxDQUNMLElBQUssZUFBZ0JBLEVBQUssQ0FldEIsT0FiaUIsTUFBTSxNQUFNQSxFQUFLLENBQzlCLE9BQVEsTUFDUixLQUFNLE9BQ04sTUFBTyxXQUNQLFlBQWEsY0FDYixRQUFTLENBQ0wsZUFBZ0IsbUJBQ2hCLGFBQWMsY0FBYyxLQUMvQixFQUNELFNBQVUsU0FDVixlQUFnQixhQUNoQyxDQUFh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
